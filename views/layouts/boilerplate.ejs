<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" href="assets/solsticeX.png">
    <title>perceptionX</title>
    <link rel="stylesheet" href="/css/style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
        integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
</head>
<body>


  <div class="navbardiv">
      <nav class="navbar">
          <input type="checkbox" id="check" name="" id="">

          <label for="check" id="checkbtn" class="icon icon1"><i class="fa fa-bars"></i></label>
          <label for="check" id="closemenu" class="icon icon2"><i class="fa fa-times"></i></label>
          


          <!-- <label for="" class="logo"><img src="/assets/perceptionX11.png" alt=""><span>perceptionX</span></label> -->
          <label for="" class="logo"><span><img src="/assets/perceptionX12.png" alt=""></span></label>
          <!-- <label class="logo" for=""><img src="/assets/perceptionX8.png" alt=""></label> -->
          <div class="pc-navbar">
            <a href="/home" class="active">Home</a>
            <a href="/home/detect" class="">Detect</a>
            <a href="/home/about" class="">About</a>
            <a href="/home/testmonial" class="">Testmonial</a>
            <a href="/home/contact" class="">Contact</a>
        </div>


          <ul>
              <li><a href="index.html">Home</a></li>
              <li><a href="project.html">Projects</a></li>
              <li><a href="gallery.html">Gallery</a></li>
              <li><a href="About_Me.html">About Me</a></li>
              <li><a href="Contact_Me.html">Contact</a></li>
          </ul>

      </nav>
  </div>
  <div class="main-content">
      <div class="left-part">
          <div class="details">
            <%- body %>
        </div>

          


          <div class="footer">
              <div class="findme">Find Me </div>
              <div class="icons">
                  <a href="#"><i class="fa-solid fa-arrow-right-long"></i></a>
                  <a href="https://www.instagram.com/prayesh_007?igsh=YjZtdnNqZnAyZGNm" target="_blank"><i
                          class="fa-brands fa-instagram"></i></a>
                  <a href="https://x.com/patel_prayesh?t=MaBwOzrorudWhOUD4X6K-g&s=08" target="_blank"><i
                          class="fa-brands fa-x-twitter"></i></a>
              </div>
          </div>

          
          
      </div>


      <div class="right-part">
          <div class="picture">
              <video class="home-video" src="\assets\dark.mp4" autoplay muted loop></video>
      </div>





      <div class="scroll-icon">
          <img src="assets/scroll2.jpg" alt="">
      </div>




      
      </div>


  </div>

  <script src="/js/script.js"></script>
  <!-- ----------------------------------------------------------------------------------------------- -->

<script>

document.addEventListener("DOMContentLoaded", function () {
    const navbarLinks = document.querySelectorAll(".pc-navbar a");

    // Get the current URL path
    const currentPath = window.location.pathname;

    navbarLinks.forEach(link => {
        if (link.getAttribute("href") === currentPath) {
            link.classList.add("active");
        } else {
            link.classList.remove("active");
        }

        link.addEventListener("click", function () {
            // Remove active class from all links
            navbarLinks.forEach(nav => nav.classList.remove("active"));

            // Add active class to clicked link
            this.classList.add("active");
        });
    });
});




document.getElementById('uploadForm').addEventListener('submit', async (e) => {
    e.preventDefault();

    const fileInput = document.getElementById('fileInput');
    if (!fileInput.files.length) {
        alert('Please select a file.');
        return;
    }

    const formData = new FormData();
    formData.append('file', fileInput.files[0]);

    try {
        const response = await fetch('/process', {
            method: 'POST',
            body: formData,
        });

        const data = await response.json();

        if (response.ok) {
            const uploadedFilePath = `/uploads/${data.filename}`;
            const processedFilePath = `/processed/${data.processedFilename}`;
            document.getElementById('upload-form').style.display = 'none';
            document.getElementById('output-div').style.display = 'block';
            document.getElementById('output').innerHTML = `
            <div class="uploads">
                <h4>Uploaded File:</h4>
                ${getFileDisplayHTML(uploadedFilePath)}
            </div>
            <div class="processed">
                <h4>Processed File:</h4>
                ${getFileDisplayHTML(processedFilePath)}
            </div>
            `;
        } else {
            document.getElementById('output').innerHTML = '<p>Failed to process the file.</p>';
        }
    } catch (err) {
        console.error('Error:', err);
        document.getElementById('output').innerHTML = '<p>Error processing the file.</p>';
    }
});

// Function to generate correct HTML for images and videos
function getFileDisplayHTML(filePath) {
    const isVideo = filePath.endsWith('.mp4') || filePath.endsWith('.avi') || filePath.endsWith('.mov');
    
    if (isVideo) {
        return `<video controls style="display: block;" loop autoplay>
                    <source src="${filePath}" type="video/mp4">
                    Your browser does not support the video tag.
                </video>`;
    } else {
        return `<img src="${filePath}" alt="File" display: block;">`;
    }
}

</script>

</body>
</html>
